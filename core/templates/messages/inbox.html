{% extends 'base.html' %}
{% block title %}Inbox{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Inbox</h4>
    <a href="{% url 'send_message' %}" class="btn btn-primary">Send Message</a>
  </div>

  {% if messages %}
    <div class="list-group">
      {% for msg in messages %}
        <a href="{% url 'message_detail' msg.id %}" class="list-group-item list-group-item-action {% if not msg.is_read and msg.recipient == request.user %}fw-bold{% endif %}">
          <div>
            <strong>From:</strong> {{ msg.sender.full_name }} |
            <strong>To:</strong> {{ msg.recipient.full_name }}
          </div>
          <div>{{ msg.subject }}</div>
          <small class="text-muted">{{ msg.timestamp|date:"Y-m-d H:i" }}</small>
        </a>
      {% endfor %}

    </div>
  {% else %}
    <p class="text-muted">No messages yet.</p>
  {% endif %}
</div>
{% endblock %}
